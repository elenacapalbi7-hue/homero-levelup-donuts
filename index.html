<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Homero Multiverse RPG</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; touch-action: none; }
        canvas { display: block; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; pointer-events: none; }
        .hud { background: rgba(0,0,0,0.8); padding: 10px; border: 2px solid #ff69b4; border-radius: 10px; display: inline-block; }
        #game-info { color: #00ffea; font-size: 1.1rem; font-weight: bold; }
        #instr { font-size: 0.8rem; color: #ffff00; }
    </style>
</head>
<body>

<div id="ui">
    <div class="hud">
        <div id="game-info">Nivel 1: PokÃ©mon Red</div>
        Donas: <span id="donas">0</span>/10<br>
        <span id="instr">Â¡Atrapa las Pokebolas!</span>
    </div>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let nivel = 0;
let donasTotal = 0;
let items = [];
let jugador = { x: canvas.width/2, y: canvas.height - 100, w: 50, h: 80 };
let touchX = canvas.width/2;
let touchY = canvas.height - 100;

const listaJuegos = [
    { nombre: "PokÃ©mon Red/Blue", color: "#78C850", instr: "Atrapa las Pokebolas" },
    { nombre: "Diablo II", color: "#2a0000", instr: "Â¡Esquiva el fuego y busca la dona!" },
    { nombre: "Final Fantasy VI", color: "#000033", instr: "Las donas caen rÃ¡pido, Â¡muÃ©vete!" },
    { nombre: "Earthbound", color: "#ffcc00", instr: "Â¡Cuidado! Todo se mueve raro" },
    { nombre: "Dragon Quest V", color: "#4169E1", instr: "Atrapa el slime para ganar donas" }
];

window.addEventListener('touchmove', (e) => {
    e.preventDefault();
    touchX = e.touches[0].clientX - jugador.w/2;
    touchY = e.touches[0].clientY - jugador.h/2;
}, { passive: false });

function crearItem() {
    let speedBase = 3 + nivel;
    items.push({
        x: Math.random() * (canvas.width - 40),
        y: -50,
        vx: nivel === 3 ? (Math.random() - 0.5) * 10 : 0, // Movimiento loco en Earthbound
        speed: speedBase,
        icono: obtenerIcono()
    });
}

function obtenerIcono() {
    if (nivel === 0) return "ðŸ”˜"; // Pokebola
    if (nivel === 1) return "ðŸ”¥"; // Fuego Diablo
    if (nivel === 2) return "ðŸ’Ž"; // Cristal FF
    if (nivel === 3) return "ðŸ‘ï¸"; // Ojo Earthbound
    return "ðŸ’§"; // Slime Dragon Quest
}

function loop() {
    // Fondo dinÃ¡mico
    ctx.fillStyle = listaJuegos[nivel].color;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Movimiento de Homero
    jugador.x += (touchX - jugador.x) * 0.2;
    if (nivel >= 1) { // En Diablo y superiores se mueve en todo
