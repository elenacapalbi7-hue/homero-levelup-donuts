<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Homero Game Multiverse - Touch</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Arial', sans-serif; overflow: hidden; touch-action: none; }
        canvas { display: block; background: #5c94fa; }
        #ui {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            text-align: center;
            pointer-events: none; /* No interfiere con el toque */
        }
        .hud {
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 30px;
            display: inline-block;
            border: 2px solid #ff69b4;
        }
        #msg { color: #00ff00; font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>

<div id="ui">
    <div class="hud">
        Nivel: <span id="lvl">1</span> | <span id="game-name">Street Fighter II</span><br>
        Donas: <span id="donas">0</span>/10
        <div id="msg">¬°Desliza el dedo para mover a Homero!</div>
    </div>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// Ajustar canvas al tama√±o de la pantalla
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let nivel = 0;
let donasRecolectadas = 0;
const listaJuegos = [
    "Street Fighter II", "Mortal Kombat II", "The Simpsons Arcade", "Metal Slug", 
    "Double Dragon", "Cadillacs and Dinosaurs", "Super Mario World", "Sonic 2", 
    "Donkey Kong Country", "Castlevania: SOTN", "Mega Man X", "Pac-Man", 
    "Donkey Kong (1981)", "Galaga", "Space Invaders", "Tetris", 
    "Super Mario Kart", "Daytona USA", "NBA Jam", "ISS Deluxe", 
    "Zelda: Ocarina of Time", "Final Fantasy VII", "Doom", "Star Fox", "Chrono Trigger"
];

// Jugador (Homero)
let jugador = {
    x: canvas.width / 2 - 25,
    y: canvas.height - 100,
    w: 50,
    h: 80,
    color: "#FFD700" // Amarillo Simpson
};

let donas = [];

// Captura del toque en pantalla
let touchX = jugador.x;

window.addEventListener('touchstart', (e) => {
    touchX = e.touches[0].clientX - jugador.w / 2;
});

window.addEventListener('touchmove', (e) => {
    // Evita que la pantalla se mueva (scroll) mientras juegas
    e.preventDefault();
    touchX = e.touches[0].clientX - jugador.w / 2;
}, { passive: false });

function crearDona() {
    donas.push({
        x: Math.random() * (canvas.width - 30),
        y: -50,
        velocidad: 3 + (nivel * 0.5)
    });
}

function dibujar() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Movimiento suave de Homero hacia el dedo
    let suavizado = 0.15; 
    jugador.x += (touchX - jugador.x) * suavizado;

    // Dibujar a Homero (Caja temporal)
    ctx.fillStyle = jugador.color;
    ctx.fillRect(jugador.x, jugador.y, jugador.w, jugador.h);
    ctx.fillStyle = "#000";
    ctx.font = "12px Arial";
    ctx.fillText("HOMERO", jugador.x + 2, jugador.y + 40);

    // Dibujar y mover donas
    ctx.font = "40px Arial";
    for (let i = donas.length - 1; i >= 0; i--) {
        let d = donas[i];
        d.y += d.velocidad;
        ctx.fillText("üç©", d.x, d.y);

        // Colisi√≥n
        if (d.x < jugador.x + jugador.w && 
            d.x + 35 > jugador.x && 
            d.y > jugador.y && 
            d.y < jugador.y + jugador.h) {
            
            donas.splice(i, 1);
            recolectar();
        }

        // Eliminar donas que caen fuera
        if (d.y > canvas.height) {
            donas.splice(i, 1);
        }
    }

    requestAnimationFrame(dibujar);
}

function recolectar() {
    donasRecolectadas++;
    document.getElementById('donas').innerText = donasRecolectadas;
    
    if (donasRecolectadas >= 10) {
        subirNivel();
    }
}

function subirNivel() {
    nivel++;
    donasRecolectadas = 0;
    document.getElementById('donas').innerText = "0";
    document.getElementById('lvl').innerText = nivel + 1;
    
    if (nivel < listaJuegos.length) {
        document.getElementById('game-name').innerText = listaJuegos[nivel];
        alert("¬°Nivel " + nivel + " completado!\nSiguiente: " + listaJuegos[nivel]);
    } else {
        alert("¬°ERES EL REY DE LAS DONAS! Has completado los 25 niveles.");
        nivel = 0;
    }
}

// Crear donas constantemente
setInterval(crearDona, 1200);

// Iniciar juego
dibujar();
</script>
</body>
</html>
