<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Homero Multiverso Real</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Press Start 2P', cursive; overflow: hidden; touch-action: none; }
        canvas { display: block; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; z-index: 10; pointer-events: none; }
        .hud { background: rgba(0,0,0,0.8); padding: 10px; border: 2px solid #ff69b4; display: inline-block; }
    </style>
</head>
<body>

<div id="ui">
    <div class="hud">
        <div id="info-juego">NIVEL 1: POK√âMON</div>
        <div id="stats">Donas: 0/10</div>
    </div>
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let nivelActual = 1;
let puntos = 0;
let items = [];
let jugador = { x: 100, y: 100, w: 40, h: 50 };
let touch = { x: 100, y: 100 };

// Captura de toque universal
window.addEventListener('touchstart', (e) => { touch.x = e.touches[0].clientX; touch.y = e.touches[0].clientY; });
window.addEventListener('touchmove', (e) => { e.preventDefault(); touch.x = e.touches[0].clientX; touch.y = e.touches[0].clientY; }, {passive:false});

function actualizar() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (nivelActual === 1) { 
        juegoPokemon(); 
    } else if (nivelActual === 2) { 
        juegoDiablo(); 
    } else if (nivelActual === 3) { 
        juegoFinalFantasy(); 
    }

    requestAnimationFrame(actualizar);
}

// --- NIVEL 1: POK√âMON (RPG de buscar) ---
let donaPos = { x: 200, y: 200 };
function juegoPokemon() {
    ctx.fillStyle = "#78C850"; // Verde hierba
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Movimiento RPG
    jugador.x += (touch.x - jugador.x) * 0.1;
    jugador.y += (touch.y - jugador.y) * 0.1;
    
    ctx.fillStyle = "yellow"; // Homero
    ctx.fillRect(jugador.x, jugador.y, jugador.w, jugador.h);
    
    ctx.font = "30px Arial";
    ctx.fillText("üç©", donaPos.x, donaPos.y);

    if (Math.hypot(jugador.x - donaPos.x, jugador.y - donaPos.y) < 40) {
        puntos++;
        document.getElementById('stats').innerText = `Donas: ${puntos}/10`;
        donaPos = { x: Math.random()*(canvas.width-50), y: Math.random()*(canvas.height-100)+50 };
        if (puntos >= 10) siguienteNivel();
    }
}

// --- NIVEL 2: DIABLO II (Esquivar Proyectiles) ---
let proyectiles = [];
function juegoDiablo() {
    ctx.fillStyle = "#200"; // Rojo infierno
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    jugador.x += (touch.x - jugador.x) * 0.1;
    jugador.y += (touch.y - jugador.y) * 0.1;

    ctx.fillStyle = "yellow";
    ctx.fillRect(jugador.x, jugador.y, jugador.w, jugador.h);

    if (Math.random() < 0.05) proyectiles.push({x: Math.random()*canvas.width, y: 0, s: 5});

    proyectiles.forEach((p, i) => {
        p.y += p.s;
        ctx.fillText("üî•", p.x, p.y);
        if (Math.hypot(jugador.x - p.x, jugador.y - p.y) < 30) {
            puntos = 0; // Si te queman pierdes las donas del nivel
            proyectiles = [];
            document.getElementById('stats').innerText = `Donas: 0/10`;
            alert("¬°TE QUEMASTE! Reiniciando nivel...");
        }
    });
    
    // Aqu√≠ la dona aparece rara vez
    if (Math.random() < 0.01) {
        ctx.fillText("üç©", Math.random()*canvas.width, Math.random()*canvas.height);
        puntos++; // En este nivel ganas puntos por sobrevivir
        document.getElementById('stats').innerText = `Puntos: ${puntos}/10`;
        if (puntos >= 10) siguienteNivel();
    }
}

// --- NIVEL 3: FINAL FANTASY (Toque R√°pido / Reflejos) ---
let cristal = { x: 100, y: 100, activo: false };
function juegoFinalFantasy() {
    ctx.fillStyle = "#005"; // Azul FF
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = "white";
    ctx.font = "15px Arial";
    ctx.fillText("¬°TOCA EL CRISTAL R√ÅPIDO!", 50, 200);

    if (!cristal.activo) {
        cristal.x = Math.random() * (canvas.width - 60);
        cristal.y = Math.random() * (canvas.height - 100);
        cristal.activo = true;
    }

    ctx.fillText("üíé", cristal.x, cristal.y);

    // Si tocas el cristal con el dedo directamente
    if (Math.hypot(touch.x - cristal.x, touch.y - cristal.y) < 50) {
        cristal.activo = false;
        puntos++;
        document.getElementById('stats').innerText = `Cristales: ${puntos}/10`;
        touch.x = -100; // Reset toque
        if (puntos >= 10) siguienteNivel();
    }
}

function siguienteNivel() {
    nivelActual++;
    puntos = 0;
    document.getElementById('stats').innerText = `Donas: 0/10`;
    if (nivelActual === 2) {
        document.getElementById('info-juego').innerText = "NIVEL 2: DIABLO II";
        alert("¬°NIVEL 2! Ahora esquiva el fuego para sobrevivir.");
    } else if (nivelActual === 3) {
        document.getElementById('info-juego').innerText = "NIVEL 3: FINAL FANTASY";
        alert("¬°NIVEL 3! Toca los cristales antes de que desaparezcan.");
    }
}

actualizar();
</script>
</body>
</html>
